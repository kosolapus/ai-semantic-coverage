

**Coverage Report Table**

| Requirement | Coverage score | Linked tests | Confidence score | Evidence |
|-------------|---------------|--------------|------------------|----------|
| R13251467-f17e-48e9-9e81-2515598237b5: Система должна отправлять уведомления о прогрессе выполнения долгих операций (progress notifications). | none | — | high | No tests explicitly verify sending progress notifications for long-running operations. The requirement’s intent ("system send progress notifications when during long-running operations") has no associated test fragments or evidence of validation. |
| R300464af-f8fe-45de-93c3-92e9d422eb6d: Система должна поддерживать транспорт HTTP+SSE для взаимодействия с клиентами через SSE и POST-запросы. | partial | /tests/mcp.version.e2e.spec.ts: "client access SSE endpoint without version prefix at SSE endpoint by SSE request" | medium | Test explicitly verifies SSE endpoint access (e.g., no version prefix), but no tests validate POST request support. The requirement’s dual focus on SSE and POST is only partially covered; POST-related intent ("system support POST requests for client interaction") has no linked tests. |
| R3d85fa35-3b3f-4514-affd-cf132d0746fd: Система должна позволять определять динамические ресурсы с параметризуемыми URI (Resource Templates). | full | /src/mcp/services/mcp-registry.service.spec.ts: "system match complex URI template when given a URI with parameterized path segments" <br> /tests/mcp-resource.e2e.spec.ts: "Verify that dynamic resource 'hello-world-dynamic' returns personalized greeting when requesting with username" <br> /tests/mcp-resource.e2e.spec.ts: "Verify that multi-path dynamic resource returns content with multiple parameters" <br> /tests/mcp-resource.e2e.spec.ts: "Verify that dynamic resource template 'hello-world-dynamic' is listed with correct URI template" | high | Tests explicitly validate parameterized URI handling: dynamic resource resolution, multi-parameter extraction, template listing, and personalized content generation. All core aspects of the requirement are directly verified. |
| R83556647-244e-4edb-9b02-3980705fd7da: Все инструменты MCP должны реализовывать машинное обучение внутри сервера. | none | — | high | No tests reference machine learning implementation. The linked test ("Handle elicitation requests and return appropriate responses") focuses on tool execution logic but does not validate ML-specific behavior (e.g., model training, inference). Requirement ambiguity ("no specific algorithms or models") exacerbates lack of coverage. |
| Ra92c0031-6120-45d4-b58b-632467c3b2d7: Система должна отправлять email‑уведомления при каждом вызове инструмента. | none | — | high | No tests explicitly verify email notifications on tool calls. The requirement’s intent ("system send email notifications when on every tool call") has no associated test fragments or evidence of validation. |
| Raaa06a27-a2e9-4965-ad66-5c46c0a7f6ef: Сервер должен быть эффективным. | none | — | high | Requirement lacks measurable efficiency metrics (e.g., response time, resource usage). No tests exist to validate any aspect of "efficiency," making coverage impossible to assess. |
| Raf87b1f9-aaf2-4274-b5ae-3219f6ad2e30: MCP-Nest должен быть безопасным. | none | — | high | Requirement is vague (no specifics on security aspects like authentication, encryption). No tests reference security validation, so coverage cannot be confirmed. |
| Rb9eaa87d-8b26-409e-958a-d8f73b411b4a: Система должна обеспечивать доступ к HTTP‑контексту (например, заголовкам запроса) внутри MCP‑обработчиков. | none | — | high | No tests explicitly verify HTTP context (e.g., request headers) access within MCP handlers. The requirement’s intents have no linked test fragments. |
| Rbcdc57a7-9e16-442d-8e3c-70138dbe6a3a: Валидация параметров вызова инструментов должна выполняться с помощью Zod. | full | /tests/mcp-tool.e2e.spec.ts: "Validate input parameters against schema and return validation errors when Before tool execution at Server-side validation to To ensure input integrity by Through zod schema validation" | high | Test explicitly validates tool call parameters using Zod schema, returning validation errors as required. Direct evidence of business intent verification. |
| Rbf63581f-15d1-4a8e-a7c2-3918180fa2a2: Система должна поддерживать транспорт Streamable HTTP для выполнения команд и получения потокового отклика. | none | /src/mcp/transport/custom-decorator.spec.ts: "system apply custom decorators to Streamable HTTP controller" <br> /src/mcp/transport/custom-decorator.spec.ts: "system work without custom decorators for Streamable HTTP controller" | medium | Tests focus on decorator implementation details but do not verify actual streaming behavior (e.g., chunked responses, real-time data delivery). Business intent ("streaming responses") lacks explicit validation. |
| Rbf726f99-c9d8-4b49-a4cf-6eacab05223a: Конфигурация MCP‑сервера должна задаваться через метод `McpModule.forRoot()` с указанием имени сервера и версии. | full | /tests/mcp-tool.e2e.spec.ts: "Initialize and configure the MCP server with specified name, version, guards, and transport settings when During server startup at McpModule.forRoot() configuration" | high | Test explicitly validates server configuration via `McpModule.forRoot()`, including name and version setup. Direct evidence of requirement fulfillment. |
| Re047c58c-798c-43d2-a302-67158179cd04: Сервер должен позволять защиту MCP‑эндпоинтов через guard‑базированную аутентификацию. | full | /tests/mcp-tool-auth.e2e.spec.ts: "Verify that unauthenticated connections are rejected" <br> /tests/mcp-tool-auth.e2e.spec.ts: "Authenticated user Verify that the MCP server tool is accessible when authenticated" <br> /tests/mcp-multi-auth.e2e.spec.ts: "developer verify OAuth-protected resource metadata" <br> /tests/mcp-guard-without-user.e2e.spec.ts: "Client MCP server with guard that does not set request.user should allow tool listing" | high | Multiple tests explicitly validate guard-based authentication: rejection of unauthenticated requests, access control for authenticated users, OAuth metadata checks, and guard behavior without user context. Full business intent coverage. |
| Rebde008e-f1b6-4e04-98a5-4e64430ccaf7: Сервер должен интегрироваться с внешним CRM‑решением. | none | — | high | Requirement lacks integration specifics (e.g., API protocols, data formats). No tests reference CRM integration, making coverage impossible to confirm. |
| Rec9b5e21-5314-4749-8393-da5fd2b84df7: MCP-Nest должен автоматически обнаруживать и регистрировать инструменты, ресурсы и подсказки, помеченные соответствующими декораторами. | none | — | high | No tests explicitly verify automatic detection/registering of tools, resources, or hints via decorators. All intents under this requirement have empty `nearTests` and `suitsWithTests`. |
| Rf4fde391-e3c5-4880-b3f7-8c5afe3f086c: Сервер должен иметь графический интерфейс пользователя, написанный на React. | none | — | high | No tests reference React-based UI implementation. Requirement’s intent ("server have a graphical user interface by using React") has no linked test fragments. |
| Rfeea1404-e837-4442-82f1-550f0651fc34: Система должна поддерживать STDIO транспорт для взаимодействия через стандартный ввод/вывод. | none | — | high | No tests explicitly verify STDIO transport functionality (e.g., standard input/output interaction). Requirement’s intents have no associated test evidence. |

---

**Risk & Robustness**

- **Key risks**:
    - **Uncovered requirements**: 10/16 requirements have *no* coverage (e.g., email notifications, ML implementation, security, efficiency, CRM integration, React UI, STDIO transport). Ambiguous requirements (e.g., "be efficient," "be secure") lack measurable criteria, making validation impossible.
    - **Partial coverage**: HTTP+SSE transport only validates SSE (not POST), and Streamable HTTP tests focus on decorators rather than actual streaming behavior.
    - **False positives**: Semantic similarity scores (e.g., Streamable HTTP decorator tests scoring 0.6+ for "streaming responses") mislead coverage assessment. Tests must validate *business intent* (e.g., "does the system deliver chunked responses?"), not implementation details.
    - **Implementation vs. business focus**: Tests like "apply custom decorators" or "handle elicitation requests" address technical setup but fail to verify core business outcomes (e.g., "does the system stream data?" or "does ML improve predictions?").

- **Measuring result quality**:
    - **True coverage** requires tests that:
        - Explicitly state the business outcome (e.g., "validate Zod schema returns errors for invalid inputs").
        - Include concrete validation steps (e.g., "check HTTP headers in handler context" for R10).
    - **False coverage** occurs when:
        - Tests only verify technical setup (e.g., decorators, middleware) without testing the actual business behavior.
        - Semantic similarity scores are used as proxy evidence (e.g., "SSE endpoint access" test for HTTP+SSE requirement).
    - **Confidence** is high only when tests directly mirror requirement language (e.g., "Zod validation" test for R5). Confidence drops to medium when partial coverage exists (e.g., SSE-only tests for HTTP+SSE requirement).

- **Improving robustness**:
    - **Clarify requirements**: Define measurable criteria (e.g., "efficiency" → "95% of requests processed in <200ms"; "secure" → "prevent SQL injection via parameterized queries").
    - **Structure tests for clarity**: Require test descriptions to explicitly state *what business outcome is verified* (e.g., "Verify streaming responses deliver data in chunks" instead of "Apply Streamable HTTP decorators").
    - **Validate beyond similarity**: Use manual review to confirm tests match requirement intent. For ambiguous requirements, enforce acceptance criteria before test creation.
    - **Enforce traceability**: Mandate direct links between requirements and tests (e.g., "R5: Zod validation → test validates input schema errors").

---

**Summary**
- **Overall coverage**: Low (only 3/16 requirements fully covered: Zod validation, server configuration, guard-based authentication).
- **Major gaps**: Critical requirements like email notifications, ML implementation, security, CRM integration, and UI have *zero* coverage. Ambiguous requirements (e.g., "be efficient") cannot be validated without clear metrics.
- **Common causes**:
    - Vague requirements lacking measurable criteria.
    - Tests focused on technical implementation (e.g., decorators) rather than business outcomes (e.g., streaming behavior).
    - Overreliance on semantic similarity scores instead of explicit evidence.
- **Actionable conclusions**:
    1. **Refine ambiguous requirements**: Define specific, testable criteria (e.g., "security" → "all endpoints require JWT authentication").
    2. **Rewrite tests to validate business intent**: Ensure every test explicitly checks the requirement’s core outcome (e.g., "Verify email is sent after tool call" for R12).
    3. **Eliminate semantic similarity as coverage proof**: Use manual review to confirm tests directly address requirements.
    4. **Prioritize high-risk gaps**: Address uncovered requirements like email notifications and ML implementation immediately to prevent production failures.
